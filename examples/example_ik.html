<HEAD>
  <SCRIPT SRC="../ganja.js"></SCRIPT>
</HEAD>
<BODY STYLE="margin:auto; max-width:1600px">
  <H1>Projective Euclidean Plane Geometry : Inverse Kinematics</H1>
  <P>
  A simple analytical IK example that is elegantly formulated using PGA. 
  </P>
  <BR>
  Drag the black points (Base,Target).<BR>
  <SCRIPT>
  function sample() {
  // Create P(R*2,0,1).
    Algebra(2,0,1).inline(()=>{  
    // Define 4 points : T is our target the others form the chain X-Y-Z
      var X=1e12+1e02, Y=1e12, Z=1e12-1e02, T=1e12-0.5e02;
    // A motor that moves distance d along line l  
      var M=(l,d)=>1-0.5*d*(1e0^(l.Normalized*1e12));
    // Graph ..  
      document.body.appendChild(this.graph([
      // Called every time the user interacts ..
        ()=>{ 
        // xt = line from x to t, xtl = half of distance x to t
          var xt=!(!X^!T), xtl=0.5*Math.min(2,xt.Length);
        // the new z is x moved along xt  
          Z.set(M(xt,2*xtl)>>>X); 
        // the new y is x moved halfway along xt and pythagoras on the ortho axis.  
          Y.set(M(Y<<xt,(1-xtl**2)**0.5)>>>M(xt,xtl)>>>X);
        },
      // Render all points and line segments.  
        X, "Base", Z, T, "Target", 0x0000FF, Y, [X,Y], [Y,Z]
      ]));
    })();
  }; sample();
  document.write('<PRE STYLE="display:inline-block; vertical-align:top">',sample.toString().replace(/\</g,'&lt;').replace(/(\b(0x)*[0-9abcdef]+\b)/g,"<FONT COLOR='#44f'>$1</FONT>").replace(/(\/\/.*?\n)/g,"<FONT COLOR='#484'>$1</FONT>").replace(/(\(\)=>|=>|\!|\^|\*|\+|\-)/g,"<FONT COLOR='#A44'>$1</FONT>").replace(/(this|while|for|var|function|const|do\b|repeat|until)/g,"<FONT COLOR='#96F'>$1</FONT>").replace(/(".*?")/g,"<FONT COLOR='red'>$1</FONT>").split('\n').slice(1).reverse().slice(1).reverse().join('\n'));
  </SCRIPT>
</PRE>
  
</BODY>